webpackJsonp([1],{"+orn":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Dd8w"),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n("NYxO");t.default={name:"TodoItem",directives:{focus:function(e,t,n){var r=t.value,o=n.context;r&&o.$nextTick(function(t){e.focus()})}},props:{todo:{type:Object,required:!0}},data:function(){return{editing:!1}},methods:(0,o.default)({},(0,a.mapActions)(["editTodo","removeTodo","toggleTodo"]),{doneEdit:function(e){var t=e.target.value.trim(),n=this.todo;t?this.editing&&(this.editTodo({todo:n,value:t}),this.editing=!1):this.removeTodo(n)},cancelEdit:function(e){e.target.value=this.todo.text,this.editing=!1}})}},"/BDc":function(e,t,n){"use strict";!function(){function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var o,a=new Promise(function(a,i){o=e[t].apply(e,r),n(o).then(a,i)});return a.request=o,a}function o(e,t,n){var o=r(e,t,n);return o.then(function(e){if(e)return new d(e,o.request)})}function a(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function i(e,t,n,o){o.forEach(function(o){o in n.prototype&&(e.prototype[o]=function(){return r(this[t],o,arguments)})})}function u(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function s(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return o(this[t],r,arguments)})})}function c(e){this._index=e}function d(e,t){this._cursor=e,this._request=t}function l(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function v(e){this._db=e}a(c,"_index",["name","keyPath","multiEntry","unique"]),i(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),s(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),a(d,"_cursor",["direction","key","primaryKey","value"]),i(d,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(d.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new d(e,t._request)})})})}),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},a(l,"_store",["name","keyPath","indexNames","autoIncrement"]),i(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),s(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),u(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},a(f,"_tx",["objectStoreNames","mode"]),u(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},a(p,"_db",["name","version","objectStoreNames"]),u(p,"_db",IDBDatabase,["deleteObjectStore","close"]),v.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},a(v,"_db",["name","version","objectStoreNames"]),u(v,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[l,c].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],o=this._store||this._index,a=o[e].apply(o,n.slice(0,-1));a.onsuccess=function(){r(a.result)}})})}),[c,l].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(o){n.iterateCursor(e,function(e){return e?(r.push(e.value),void 0!==t&&r.length==t?void o(r):void e.continue()):void o(r)})})})});var h={open:function(e,t,n){var o=r(indexedDB,"open",[e,t]),a=o.request;return a.onupgradeneeded=function(e){n&&n(new p(a.result,e.oldVersion,a.transaction))},o.then(function(e){return new v(e)})},delete:function(e){return r(indexedDB,"deleteDatabase",[e])}};e.exports=h,e.exports.default=e.exports}()},"11qD":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("xMUc"),o=n.n(r);for(var a in r)["default","default"].indexOf(a)<0&&function(e){n.d(t,e,function(){return r[e]})}(a);var i=n("CIOG"),u=n("VU/8"),s=u(o.a,i.a,!1,null,null,null);t.default=s.exports},"6Ab8":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),a=r(o),i=n("exGp"),u=r(i),s=n("Zrlr"),c=r(s),d=n("wxAW"),l=r(d),f=n("/BDc"),p=r(f),v=function(){function e(t){(0,c.default)(this,e),this._dbName=t,this._objectStoreName="todos"}return(0,l.default)(e,[{key:"deleteDatabase",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||function(){},e.next=3,p.default.delete(this._dbName);case 3:t(this);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"open",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,u.default)(a.default.mark(function e(t,n){var r,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||function(){},r=this,o=!1,e.next=5,p.default.open(this._dbName,1,function(e){o=!0,e.createObjectStore(r._objectStoreName,{keyPath:"id",autoIncrement:!0});var t=e.createObjectStore("search",{keyPath:"id",autoIncrement:!0});t.createIndex("search_id","id"),t.createIndex("search_messageid_index","messageId"),t.createIndex("search_itemid_index","itemId"),t.createIndex("search_timestamp_index","timestamp")});case 5:if(r.db=e.sent,!o||!t.populated){e.next=9;break}return e.next=9,r.populate();case 9:n(r,{todos:[]});case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"populate",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(a.default.mark(function e(){var t,n,r,o,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.db.transaction(["search"],"readwrite"),n=t.objectStore("search"),r=1e5,o=0;case 4:if(!(o<r)){e.next=11;break}return i={name:"Search "+o,messageId:"Message "+o,itemId:"Item "+o,timestamp:Date.now()},e.next=8,n.put(i);case 8:o++,e.next=4;break;case 11:return e.next=13,t.complete;case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeDatabase",value:function(){this.db.close()}},{key:"find",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,u.default)(a.default.mark(function e(t,n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return r=this,e.next=5,this.findAll(function(){var e=(0,u.default)(a.default.mark(function e(o){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.call(r,o.filter(function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"findAll",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t||function(){},this.db){e.next=3;break}return e.abrupt("return");case 3:return n=[],r=this.db.transaction(this._objectStoreName),r.objectStore(this._objectStoreName).iterateCursor(function(e){e&&(n.push(e.value),e.continue())}),e.next=8,r.complete;case 8:return e.next=10,t.call(this,n);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"save",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,u.default)(a.default.mark(function e(t,n){var r,o,i,u,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.db.transaction(this._objectStoreName,"readwrite"),o=r.objectStore(this._objectStoreName),i=void 0,!n){e.next=13;break}return e.next=6,o.get(n);case 6:u=e.sent;for(s in t)t.hasOwnProperty(s)&&(u[s]=t[s]);return e.next=10,o.put(u);case 10:i=e.sent,e.next=16;break;case 13:return e.next=15,o.add(t);case 15:i=e.sent;case 16:return e.next=18,r.complete;case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}},e,this)}));return e}()},{key:"remove",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,u.default)(a.default.mark(function e(t,n){var r,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||function(){},r=this.db.transaction(this._objectStoreName,"readwrite"),o=r.objectStore(this._objectStoreName),e.next=5,o.delete(t);case 5:return e.next=7,r.complete;case 7:n.call(this);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"drop",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={todos:[]},r=this,e.next=4,this.findAll(function(){var e=(0,u.default)(a.default.mark(function e(o){var i,u;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.db.transaction(r._objectStoreName,"readwrite"),u=i.objectStore(r._objectStoreName),o.forEach(function(e){u.delete(e.id)}),e.next=5,i.complete;case 5:t.call(r,n.todos);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.default=v},AEjJ:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"todo",class:{completed:e.todo.done,editing:e.editing}},[n("div",{staticClass:"view"},[n("input",{staticClass:"toggle",attrs:{type:"checkbox"},domProps:{checked:e.todo.done},on:{change:function(t){e.toggleTodo(e.todo)}}}),e._v(" "),n("label",{on:{dblclick:function(t){e.editing=!0}}},[e._v("\n      "+e._s(e.todo.text))]),e._v(" "),n("button",{staticClass:"destroy",on:{click:function(t){t.preventDefault(),e.removeTodo(e.todo)}}})]),e._v(" "),n("input",{directives:[{name:"focus",rawName:"v-focus",value:e.editing,expression:"editing"},{name:"show",rawName:"v-show",value:e.editing,expression:"editing"}],staticClass:"edit",attrs:{type:"text"},domProps:{value:e.todo.text},on:{keyup:[function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.doneEdit(t):null},function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.cancelEdit(t):null}],blue:e.doneEdit}})])},o=[],a={render:r,staticRenderFns:o};t.a=a},CIOG:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"header"},[n("h1",[e._v("Todos")]),e._v(" "),n("input",{staticClass:"new-todo",attrs:{type:"text",autofocus:"",autocomplete:"off",placeholder:"What needs to be done?"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addTodo(t):null}}})])},o=[],a={render:r,staticRenderFns:o};t.a=a},EHTI:function(e,t,n){"use strict";function r(e){n("bVBg")}Object.defineProperty(t,"__esModule",{value:!0});var o=n("eXNe"),a=n.n(o);for(var i in o)["default","default"].indexOf(i)<0&&function(e){n.d(t,e,function(){return o[e]})}(i);var u=n("fzi1"),s=n("VU/8"),c=r,d=s(a.a,u.a,!1,c,null,null);t.default=d.exports},IcnI:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("6Ab8"),a=r(o),i=n("7+uW"),u=r(i),s=n("NYxO"),c=r(s),d=n("mUbh"),l=r(d),f=n("ukYY"),p=r(f),v=n("bGDG"),h=r(v);u.default.use(c.default),t.default=new c.default.Store({state:{todos:[],db:new a.default("vuejs-idb")},actions:l.default,mutations:p.default,plugins:h.default})},M93x:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("xJD8"),o=n.n(r);for(var a in r)["default","default"].indexOf(a)<0&&function(e){n.d(t,e,function(){return r[e]})}(a);var i=n("xHmB"),u=n("VU/8"),s=u(o.a,i.a,!1,null,null,null);t.default=s.exports},NHnr:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n("M93x"),a=r(o),i=n("rmnh"),u=r(i),s=n("7+uW"),c=r(s),d=n("IcnI"),l=r(d);window.VueApp=new c.default({store:l.default,el:"#app",render:function(e){return e(a.default)}});var f=new u.default.Router;["all","active","completed"].forEach(function(e){f.on(e,function(){window.VueApp.filter=e})}),f.configure({notfound:function(){window.location.hash="",window.VueApp.filter="all"}}),f.init()},"Yw/y":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("+orn"),o=n.n(r);for(var a in r)["default","default"].indexOf(a)<0&&function(e){n.d(t,e,function(){return r[e]})}(a);var i=n("AEjJ"),u=n("VU/8"),s=u(o.a,i.a,!1,null,null,null);t.default=s.exports},bGDG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("mvHQ"),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n("ukYY"),i=function(e){e.subscribe(function(e,t){var n=t.todos;window.localStorage.setItem(a.STORAGE_KEY,(0,o.default)(n))})};t.default=[i]},bVBg:function(e,t){},eXNe:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("Dd8w"),a=r(o),i=n("Yw/y"),u=r(i),s=n("11qD"),c=r(s),d=n("NYxO");t.default={components:{TodosHeader:c.default,TodoItem:u.default},filters:{pluralize:function(e){return 1===e?"item":"items"}},data:function(){return{filter:"all",editing:!1}},computed:{todos:function(){return this.$store.state.todos},remaining:function(){return this.todos.filter(function(e){return!e.done}).length},completed:function(){return this.todos.filter(function(e){return e.done}).length},filteredTodos:function(){return"active"===this.filter?this.todos.filter(function(e){return!e.done}):"completed"===this.filter?this.todos.filter(function(e){return e.done}):this.todos},allDone:{get:function(){return 0===this.remaining},set:function(e){this.todos.forEach(function(t){t.done=e})}}},beforeMount:function(){this.$store.dispatch("asyncStoreInit")},methods:(0,a.default)({},(0,d.mapActions)(["clearCompleted"]))}},fzi1:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"todoapp"},[n("TodosHeader"),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:e.todos.length,expression:"todos.length"}],staticClass:"main"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.allDone,expression:"allDone"}],staticClass:"toggle-all",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.allDone)?e._i(e.allDone,null)>-1:e.allDone},on:{change:function(t){var n=e.allDone,r=t.target,o=!!r.checked;if(Array.isArray(n)){var a=e._i(n,null);r.checked?a<0&&(e.allDone=n.concat([null])):a>-1&&(e.allDone=n.slice(0,a).concat(n.slice(a+1)))}else e.allDone=o}}}),e._v(" "),n("ul",{staticClass:"todo-list"},e._l(e.filteredTodos,function(e,t){return n("TodoItem",{key:t,attrs:{todo:e}})}))]),e._v(" "),n("footer",{directives:[{name:"show",rawName:"v-show",value:e.todos.length>0,expression:"todos.length > 0"}],staticClass:"footer"},[n("span",{staticClass:"todo-count"},[n("strong",[e._v(e._s(e.remaining))]),e._v(" "+e._s(e._f("pluralize")(e.remaining))+" left\n    ")]),e._v(" "),n("ul",{staticClass:"filters"},[n("li",[n("a",{class:{selected:"all"==e.filter},attrs:{href:"#/all"},on:{click:function(t){e.filter="all"}}},[e._v("All")])]),e._v(" "),n("li",[n("a",{class:{selected:"active"==e.filter},attrs:{href:"#/active"},on:{click:function(t){e.filter="active"}}},[e._v("Active")])]),e._v(" "),n("li",[n("a",{class:{selected:"completed"==e.filter},attrs:{href:"#/completed"},on:{click:function(t){e.filter="completed"}}},[e._v("Completed")])])]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:e.completed,expression:"completed"}],staticClass:"clear-completed",on:{click:function(t){return t.preventDefault(),e.clearCompleted(t)}}},[e._v("Clear Completed")])])],1)},o=[],a={render:r,staticRenderFns:o};t.a=a},mUbh:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("BO1k"),a=r(o),i=n("Xxa5"),u=r(i),s=n("exGp"),c=r(s);t.default={asyncStoreInit:function(e){var t=this,n=e.state,r=e.commit;return(0,c.default)(u.default.mark(function e(){var o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.db.open({populated:!1});case 2:return e.next=4,n.db.findAll();case 4:o=e.sent,r("initializeTodos",o);case 6:case"end":return e.stop()}},e,t)}))()},addTodo:function(e,t){var n=this,r=e.state,o=e.commit;return(0,c.default)(u.default.mark(function e(){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={text:t,done:!1},e.next=3,r.db.save(a);case 3:a.id=e.sent,o("addTodo",a);case 5:case"end":return e.stop()}},e,n)}))()},removeTodo:function(e,t){var n=this,r=e.state,o=e.commit;return(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.db.remove(t.id);case 2:o("removeTodo",t);case 3:case"end":return e.stop()}},e,n)}))()},toggleTodo:function(e,t){var n=this,r=e.state,o=e.commit;return(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.done=!t.done,r.db.save(t,t.id),o("editTodo",{todo:t});case 3:case"end":return e.stop()}},e,n)}))()},editTodo:function(e,t){var n=this,r=e.state,o=e.commit,a=t.todo,i=t.value;return(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.text=i,e.next=3,r.db.save(a,a.id);case 3:o("editTodo",{todo:a});case 4:case"end":return e.stop()}},e,n)}))()},clearCompleted:function(e){var t=this,n=e.state,r=(e.commit,e.dispatch);return(0,c.default)(u.default.mark(function e(){var o,i,s,c,d,l,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=n.todos.filter(function(e){return e.done}),i=!0,s=!1,c=void 0,e.prev=4,d=(0,a.default)(o);case 6:if(i=(l=d.next()).done){e.next=13;break}return f=l.value,e.next=10,r("removeTodo",f);case 10:i=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),s=!0,c=e.t0;case 19:e.prev=19,e.prev=20,!i&&d.return&&d.return();case 22:if(e.prev=22,!s){e.next=25;break}throw c;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}},e,t,[[4,15,19,27],[20,,22,26]])}))()}}},ukYY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={initializeTodos:function(e,t){e.todos=t},addTodo:function(e,t){e.todos.push(t)},removeTodo:function(e,t){e.todos.splice(e.todos.indexOf(t),1)},editTodo:function(e,t){var n=t.todo,r=t.text,o=void 0===r?n.text:r,a=t.done,i=void 0===a?n.done:a;n.text=o,n.done=i}}},xHmB:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Todos")],1)},o=[],a={render:r,staticRenderFns:o};t.a=a},xJD8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("EHTI"),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={name:"App",components:{Todos:o.default}}},xMUc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"TodosHeader",methods:{addTodo:function(e){var t=e.target.value;t.trim()&&this.$store.dispatch("addTodo",t),e.target.value=""}}}}},["NHnr"]);
//# sourceMappingURL=app.8ec7a9c7930d6bf44e1c.js.map